<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RevenCast API Tester</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
        }

        .api-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .config-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .license-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: #6c757d;
        }

        button.success {
            background: #28a745;
        }

        .response-section {
            margin-top: 20px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .response-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.5;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tab-container {
            margin-bottom: 20px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            padding: 12px 24px;
            background: #f8f9fa;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 40px;
            padding: 20px;
            font-size: 0.9rem;
        }

        .endpoint-info {
            background: #e3f2fd;
            padding: 10px 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-family: monospace;
            font-size: 14px;
            color: #1565c0;
            word-break: break-all;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .api-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>RevenCast API Tester</h1>
            <div class="subtitle">Test your Vercel APIs at: https://revencast-api.vercel.app/</div>
        </header>

        <!-- License Configuration -->
        <div class="api-section">
            <h2>üîë License Configuration</h2>
            <div class="license-section">
                <label for="licenseKey">License Key (Required for all APIs):</label>
                <input type="text" id="licenseKey" placeholder="Enter your license key (e.g., revencast-license-001)" value="revencast-license-001">
                <button onclick="testLicense()">Test License</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" onclick="switchTab(0)">Reddit API</button>
                <button class="tab" onclick="switchTab(1)">OpenAI API</button>
                <button class="tab" onclick="switchTab(2)">YouTube API</button>
                <button class="tab" onclick="switchTab(3)">SERP API</button>
                <button class="tab" onclick="switchTab(4)">NewsData API</button>
                <button class="tab" onclick="switchTab(5)">Firestore API</button>
            </div>
        </div>

        <!-- Reddit API Tab -->
        <div class="tab-content active" id="tab-reddit">
            <div class="api-section">
                <h2>üî¥ Reddit Search API</h2>
                <div class="endpoint-info">Endpoint: https://revencast-api.vercel.app/api/reddit-proxy</div>
                
                <div class="form-row">
                    <div>
                        <label for="redditQuery">Search Query:</label>
                        <input type="text" id="redditQuery" placeholder="Enter search term" value="artificial intelligence">
                    </div>
                    <div>
                        <label for="redditLimit">Limit:</label>
                        <input type="number" id="redditLimit" value="10" min="1" max="100">
                    </div>
                    <div>
                        <label for="redditSort">Sort By:</label>
                        <select id="redditSort">
                            <option value="relevance">Relevance</option>
                            <option value="hot">Hot</option>
                            <option value="top">Top</option>
                            <option value="new">New</option>
                            <option value="comments">Comments</option>
                        </select>
                    </div>
                    <div>
                        <label for="redditTime">Time Range:</label>
                        <select id="redditTime">
                            <option value="all">All Time</option>
                            <option value="year">Year</option>
                            <option value="month">Month</option>
                            <option value="week">Week</option>
                            <option value="day">Day</option>
                            <option value="hour">Hour</option>
                        </select>
                    </div>
                </div>
                
                <button onclick="testRedditAPI()">Test Reddit API</button>
                <button class="secondary" onclick="resetRedditForm()">Reset</button>
                
                <div class="loading" id="redditLoading">
                    <div class="spinner"></div>
                    <p>Searching Reddit...</p>
                </div>
                
                <div class="response-section" id="redditResponse" style="display: none;">
                    <div class="response-title">
                        <h3>Response</h3>
                        <span class="status" id="redditStatus">200 OK</span>
                    </div>
                    <pre id="redditResponseData"></pre>
                </div>
            </div>
        </div>

        <!-- OpenAI API Tab -->
        <div class="tab-content" id="tab-openai">
            <div class="api-section">
                <h2>ü§ñ OpenAI Chat API</h2>
                <div class="endpoint-info">Endpoint: https://revencast-api.vercel.app/api/openai-proxy</div>
                
                <label for="openaiModel">Model:</label>
                <select id="openaiModel">
                    <option value="gpt-4">GPT-4</option>
                    <option value="gpt-4-turbo">GPT-4 Turbo</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                </select>
                
                <label for="systemPrompt">System Prompt:</label>
                <textarea id="systemPrompt" rows="2" placeholder="You are a helpful assistant.">You are a helpful AI assistant. Provide clear and concise answers.</textarea>
                
                <label for="userMessage">User Message:</label>
                <textarea id="userMessage" rows="3" placeholder="Enter your message here...">Explain artificial intelligence in simple terms</textarea>
                
                <div class="form-row">
                    <div>
                        <label for="temperature">Temperature:</label>
                        <input type="number" id="temperature" value="0.7" min="0" max="2" step="0.1">
                    </div>
                    <div>
                        <label for="maxTokens">Max Tokens:</label>
                        <input type="number" id="maxTokens" value="500" min="1" max="4000">
                    </div>
                </div>
                
                <button onclick="testOpenAIAPI()">Test OpenAI API</button>
                <button class="secondary" onclick="resetOpenAIForm()">Reset</button>
                
                <div class="loading" id="openaiLoading">
                    <div class="spinner"></div>
                    <p>Generating AI response...</p>
                </div>
                
                <div class="response-section" id="openaiResponse" style="display: none;">
                    <div class="response-title">
                        <h3>Response</h3>
                        <span class="status" id="openaiStatus">200 OK</span>
                    </div>
                    <pre id="openaiResponseData"></pre>
                </div>
            </div>
        </div>

        <!-- YouTube API Tab -->
        <div class="tab-content" id="tab-youtube">
            <div class="api-section">
                <h2>üì∫ YouTube Search API</h2>
                <div class="endpoint-info">Endpoint: https://revencast-api.vercel.app/api/youtube-proxy</div>
                
                <div class="form-row">
                    <div>
                        <label for="youtubeQuery">Search Query:</label>
                        <input type="text" id="youtubeQuery" placeholder="Enter search term" value="AI tutorials">
                    </div>
                    <div>
                        <label for="maxResults">Max Results:</label>
                        <input type="number" id="maxResults" value="5" min="1" max="50">
                    </div>
                    <div>
                        <label for="searchType">Search Type:</label>
                        <select id="searchType">
                            <option value="video">Video</option>
                            <option value="channel">Channel</option>
                            <option value="playlist">Playlist</option>
                        </select>
                    </div>
                </div>
                
                <button onclick="testYouTubeAPI()">Test YouTube API</button>
                <button class="secondary" onclick="resetYouTubeForm()">Reset</button>
                
                <div class="loading" id="youtubeLoading">
                    <div class="spinner"></div>
                    <p>Searching YouTube...</p>
                </div>
                
                <div class="response-section" id="youtubeResponse" style="display: none;">
                    <div class="response-title">
                        <h3>Response</h3>
                        <span class="status" id="youtubeStatus">200 OK</span>
                    </div>
                    <pre id="youtubeResponseData"></pre>
                </div>
            </div>
        </div>

        <!-- SERP API Tab -->
        <div class="tab-content" id="tab-serp">
            <div class="api-section">
                <h2>üîç SERP API (Google Search)</h2>
                <div class="endpoint-info">Endpoint: https://revencast-api.vercel.app/api/serpapi-proxy</div>
                
                <div class="form-row">
                    <div>
                        <label for="serpQuery">Search Query:</label>
                        <input type="text" id="serpQuery" placeholder="Enter search term" value="latest technology news">
                    </div>
                    <div>
                        <label for="serpLocation">Location:</label>
                        <input type="text" id="serpLocation" placeholder="e.g., united states" value="united states">
                    </div>
                    <div>
                        <label for="serpNum">Number of Results:</label>
                        <input type="number" id="serpNum" value="10" min="1" max="100">
                    </div>
                </div>
                
                <button onclick="testSERPAPI()">Test SERP API</button>
                <button class="secondary" onclick="resetSERPForm()">Reset</button>
                
                <div class="loading" id="serpLoading">
                    <div class="spinner"></div>
                    <p>Searching Google...</p>
                </div>
                
                <div class="response-section" id="serpResponse" style="display: none;">
                    <div class="response-title">
                        <h3>Response</h3>
                        <span class="status" id="serpStatus">200 OK</span>
                    </div>
                    <pre id="serpResponseData"></pre>
                </div>
            </div>
        </div>

        <!-- NewsData API Tab -->
        <div class="tab-content" id="tab-newsdata">
            <div class="api-section">
                <h2>üì∞ NewsData.io API</h2>
                <div class="endpoint-info">Endpoint: https://revencast-api.vercel.app/api/newsdata-proxy</div>
                
                <div class="form-row">
                    <div>
                        <label for="newsQuery">Search Query:</label>
                        <input type="text" id="newsQuery" placeholder="Enter search term" value="technology">
                    </div>
                    <div>
                        <label for="newsLanguage">Language:</label>
                        <input type="text" id="newsLanguage" placeholder="e.g., en" value="en">
                    </div>
                    <div>
                        <label for="newsCountry">Country:</label>
                        <input type="text" id="newsCountry" placeholder="e.g., us" value="us">
                    </div>
                </div>
                
                <button onclick="testNewsDataAPI()">Test NewsData API</button>
                <button class="secondary" onclick="resetNewsDataForm()">Reset</button>
                
                <div class="loading" id="newsdataLoading">
                    <div class="spinner"></div>
                    <p>Fetching news...</p>
                </div>
                
                <div class="response-section" id="newsdataResponse" style="display: none;">
                    <div class="response-title">
                        <h3>Response</h3>
                        <span class="status" id="newsdataStatus">200 OK</span>
                    </div>
                    <pre id="newsdataResponseData"></pre>
                </div>
            </div>
        </div>

        <!-- Firestore API Tab -->
        <div class="tab-content" id="tab-firestore">
            <div class="api-section">
                <h2>üî• Firestore Connection Test</h2>
                <div class="endpoint-info">Endpoint: https://revencast-api.vercel.app/api/firestore-proxy</div>
                
                <p>This API tests the connection to Google Firestore by creating a test document and reading it back.</p>
                
                <button onclick="testFirestoreAPI()">Test Firestore Connection</button>
                
                <div class="loading" id="firestoreLoading">
                    <div class="spinner"></div>
                    <p>Testing Firestore connection...</p>
                </div>
                
                <div class="response-section" id="firestoreResponse" style="display: none;">
                    <div class="response-title">
                        <h3>Response</h3>
                        <span class="status" id="firestoreStatus">200 OK</span>
                    </div>
                    <pre id="firestoreResponseData"></pre>
                </div>
            </div>
        </div>

        <footer>
            <p>RevenCast API Tester | Base URL: https://revencast-api.vercel.app/</p>
            <p>All APIs require a valid license key in the X-License-Key header</p>
        </footer>
    </div>

    <script>
        const BASE_URL = 'https://revencast-api.vercel.app/api';
        let currentTab = 0;

        // Tab switching
        function switchTab(tabIndex) {
            currentTab = tabIndex;
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach((tab, index) => {
                tab.classList.toggle('active', index === tabIndex);
            });
            
            tabContents.forEach((content, index) => {
                content.classList.toggle('active', index === tabIndex);
            });
        }

        // Get license key
        function getLicenseKey() {
            return document.getElementById('licenseKey').value.trim();
        }

        // Show/hide loading
        function showLoading(apiName) {
            document.getElementById(`${apiName}Loading`).style.display = 'block';
            document.getElementById(`${apiName}Response`).style.display = 'none';
        }

        function hideLoading(apiName) {
            document.getElementById(`${apiName}Loading`).style.display = 'none';
        }

        function showResponse(apiName, status, data) {
            hideLoading(apiName);
            const statusEl = document.getElementById(`${apiName}Status`);
            const responseEl = document.getElementById(`${apiName}ResponseData`);
            const containerEl = document.getElementById(`${apiName}Response`);
            
            statusEl.textContent = `${status} ${status === 200 ? 'OK' : 'Error'}`;
            statusEl.className = `status ${status === 200 ? 'success' : 'error'}`;
            
            responseEl.textContent = JSON.stringify(data, null, 2);
            containerEl.style.display = 'block';
            
            // Scroll to response
            containerEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Test License
        async function testLicense() {
            const licenseKey = getLicenseKey();
            if (!licenseKey) {
                alert('Please enter a license key');
                return;
            }

            try {
                const response = await fetch(`${BASE_URL}/auth`, {
                    method: 'GET',
                    headers: {
                        'X-License-Key': licenseKey
                    }
                });
                
                const data = await response.json();
                alert(`License test: ${response.status === 200 ? '‚úì Valid' : '‚úó Invalid'}\n${data.message || data.error}`);
            } catch (error) {
                alert(`Error testing license: ${error.message}`);
            }
        }

        // Test Reddit API
        async function testRedditAPI() {
            const licenseKey = getLicenseKey();
            if (!licenseKey) {
                alert('Please enter a license key');
                return;
            }

            const query = document.getElementById('redditQuery').value;
            if (!query) {
                alert('Please enter a search query');
                return;
            }

            showLoading('reddit');

            try {
                const response = await fetch(`${BASE_URL}/reddit-proxy`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-License-Key': licenseKey
                    },
                    body: JSON.stringify({
                        q: query,
                        limit: parseInt(document.getElementById('redditLimit').value),
                        sort: document.getElementById('redditSort').value,
                        time: document.getElementById('redditTime').value
                    })
                });

                const data = await response.json();
                showResponse('reddit', response.status, data);
            } catch (error) {
                showResponse('reddit', 500, { error: error.message });
            }
        }

        // Test OpenAI API
        async function testOpenAIAPI() {
            const licenseKey = getLicenseKey();
            if (!licenseKey) {
                alert('Please enter a license key');
                return;
            }

            const userMessage = document.getElementById('userMessage').value;
            if (!userMessage) {
                alert('Please enter a message');
                return;
            }

            showLoading('openai');

            try {
                const response = await fetch(`${BASE_URL}/openai-proxy`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-License-Key': licenseKey
                    },
                    body: JSON.stringify({
                        messages: [
                            {
                                role: 'system',
                                content: document.getElementById('systemPrompt').value
                            },
                            {
                                role: 'user',
                                content: userMessage
                            }
                        ],
                        model: document.getElementById('openaiModel').value,
                        max_tokens: parseInt(document.getElementById('maxTokens').value),
                        temperature: parseFloat(document.getElementById('temperature').value)
                    })
                });

                const data = await response.json();
                showResponse('openai', response.status, data);
            } catch (error) {
                showResponse('openai', 500, { error: error.message });
            }
        }

        // Test YouTube API
        async function testYouTubeAPI() {
            const licenseKey = getLicenseKey();
            if (!licenseKey) {
                alert('Please enter a license key');
                return;
            }

            const query = document.getElementById('youtubeQuery').value;
            if (!query) {
                alert('Please enter a search query');
                return;
            }

            showLoading('youtube');

            try {
                const response = await fetch(`${BASE_URL}/youtube-proxy`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-License-Key': licenseKey
                    },
                    body: JSON.stringify({
                        q: query,
                        maxResults: parseInt(document.getElementById('maxResults').value),
                        type: document.getElementById('searchType').value
                    })
                });

                const data = await response.json();
                showResponse('youtube', response.status, data);
            } catch (error) {
                showResponse('youtube', 500, { error: error.message });
            }
        }

        // Test SERP API
        async function testSERPAPI() {
            const licenseKey = getLicenseKey();
            if (!licenseKey) {
                alert('Please enter a license key');
                return;
            }

            const query = document.getElementById('serpQuery').value;
            if (!query) {
                alert('Please enter a search query');
                return;
            }

            showLoading('serp');

            try {
                const params = new URLSearchParams({
                    q: query,
                    location: document.getElementById('serpLocation').value,
                    num: document.getElementById('serpNum').value,
                    engine: 'google'
                });

                const response = await fetch(`${BASE_URL}/serpapi-proxy?${params.toString()}`, {
                    method: 'GET',
                    headers: {
                        'X-License-Key': licenseKey
                    }
                });

                const data = await response.json();
                showResponse('serp', response.status, data);
            } catch (error) {
                showResponse('serp', 500, { error: error.message });
            }
        }

        // Test NewsData API
        async function testNewsDataAPI() {
            const licenseKey = getLicenseKey();
            if (!licenseKey) {
                alert('Please enter a license key');
                return;
            }

            showLoading('newsdata');

            try {
                const params = new URLSearchParams({
                    q: document.getElementById('newsQuery').value,
                    language: document.getElementById('newsLanguage').value,
                    country: document.getElementById('newsCountry').value
                });

                const response = await fetch(`${BASE_URL}/newsdata-proxy?${params.toString()}`, {
                    method: 'GET',
                    headers: {
                        'X-License-Key': licenseKey
                    }
                });

                const data = await response.json();
                showResponse('newsdata', response.status, data);
            } catch (error) {
                showResponse('newsdata', 500, { error: error.message });
            }
        }

        // Test Firestore API
        async function testFirestoreAPI() {
            const licenseKey = getLicenseKey();
            if (!licenseKey) {
                alert('Please enter a license key');
                return;
            }

            showLoading('firestore');

            try {
                const response = await fetch(`${BASE_URL}/firestore-proxy`, {
                    method: 'GET',
                    headers: {
                        'X-License-Key': licenseKey
                    }
                });

                const data = await response.json();
                showResponse('firestore', response.status, data);
            } catch (error) {
                showResponse('firestore', 500, { error: error.message });
            }
        }

        // Reset functions
        function resetRedditForm() {
            document.getElementById('redditQuery').value = 'artificial intelligence';
            document.getElementById('redditLimit').value = '10';
            document.getElementById('redditResponse').style.display = 'none';
        }

        function resetOpenAIForm() {
            document.getElementById('systemPrompt').value = 'You are a helpful AI assistant. Provide clear and concise answers.';
            document.getElementById('userMessage').value = 'Explain artificial intelligence in simple terms';
            document.getElementById('temperature').value = '0.7';
            document.getElementById('maxTokens').value = '500';
            document.getElementById('openaiResponse').style.display = 'none';
        }

        function resetYouTubeForm() {
            document.getElementById('youtubeQuery').value = 'AI tutorials';
            document.getElementById('maxResults').value = '5';
            document.getElementById('youtubeResponse').style.display = 'none';
        }

        function resetSERPForm() {
            document.getElementById('serpQuery').value = 'latest technology news';
            document.getElementById('serpLocation').value = 'united states';
            document.getElementById('serpNum').value = '10';
            document.getElementById('serpResponse').style.display = 'none';
        }

        function resetNewsDataForm() {
            document.getElementById('newsQuery').value = 'technology';
            document.getElementById('newsLanguage').value = 'en';
            document.getElementById('newsCountry').value = 'us';
            document.getElementById('newsdataResponse').style.display = 'none';
        }

        // Initialize with license key
        document.getElementById('licenseKey').addEventListener('change', (e) => {
            localStorage.setItem('revencast_license_key', e.target.value);
        });

        // Load saved license key
        window.addEventListener('load', () => {
            const savedKey = localStorage.getItem('revencast_license_key');
            if (savedKey) {
                document.getElementById('licenseKey').value = savedKey;
            }
        });
    </script>
</body>
</html>